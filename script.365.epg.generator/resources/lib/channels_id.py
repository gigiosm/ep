# -*- coding: utf-8 -*-


import xbmcaddon
import xbmcgui
import xbmc
import unicodedata
import requests
import xml.etree.ElementTree as ET


addon = xbmcaddon.Addon(id='script.365.epg.generator')


def encode(string):
    if addon.getSetting("diacritics") == "false":
        string = str(unicodedata.normalize('NFKD', string).encode('ascii', 'ignore'), "utf-8")
    return string


def main():
    xbmc.executebuiltin('ActivateWindow(busydialognocancel)')
    channels = []
    channels.append("[B][COLOR lightskyblue]\nTV.sms.cz kanály:[/COLOR][/B]")
    html = requests.get("http://programandroid.365dni.cz/android/v6-tv.php?locale=cs_CZ").text
    root = ET.fromstring(html)
    for i in root.iter('a'):
        channels.append("    " + i.find('n').text + ": " + encode((i.attrib["id"] + "-" + i.find('n').text).replace(" ", "-").lower()))
    channels.append("[B][COLOR lightskyblue]\nT-Mobile TV GO kanály:[/COLOR][/B]")
    params={"dsid": "c75536831e9bdc93", "deviceName": "XIAOMI MI 11", "deviceType": "OTT_STB", "osVersion": "10", "appVersion": "3.7.0", "language": "CZ"}
    headers={"Host": "czgo.magio.tv", "authorization": "Bearer", "User-Agent": "okhttp/3.12.12", "content-type":  "application/json", "Connection": "Keep-Alive"}
    req = requests.post("https://czgo.magio.tv/v2/auth/init", params=params, headers=headers, verify=True).json()
    token = req["token"]["accessToken"]
    headers2={"Host": "czgo.magio.tv", "authorization": "Bearer " + token, "User-Agent": "okhttp/3.12.12", "content-type":  "application/json"}
    req1 = requests.get("https://czgo.magio.tv/v2/television/channels?list=LIVE&queryScope=LIVE", headers=headers2).json()["items"]
    for y in req1:
        id = str(y["channel"]["channelId"])
        name = y["channel"]["name"]
        channels.append("    " + name.replace(" HD", "") + ": " + "tm-" + id + "-" + encode(name).replace(" HD", "").lower().replace(" ", "-"))
    channels.append("[B][COLOR lightskyblue]\nMagio GO kanály:[/COLOR][/B]")
    params={"dsid": "c75536831e9bdc93", "deviceName": "XIAOMI MI 11", "deviceType": "OTT_STB", "osVersion": "10", "appVersion": "3.7.0", "language": "SK"}
    headers={"Host": "skgo.magio.tv", "authorization": "Bearer", "User-Agent": "okhttp/3.12.12", "content-type":  "application/json", "Connection": "Keep-Alive"}
    req = requests.post("https://skgo.magio.tv/v2/auth/init", params=params, headers=headers, verify=True).json()
    token = req["token"]["accessToken"]
    headers2={"Host": "skgo.magio.tv", "authorization": "Bearer " + token, "User-Agent": "okhttp/3.12.12", "content-type":  "application/json"}
    req1 = requests.get("https://skgo.magio.tv/v2/television/channels?list=LIVE&queryScope=LIVE", headers=headers2).json()["items"]
    for y in req1:
        id = str(y["channel"]["channelId"])
        name = y["channel"]["name"]
        channels.append("    " + name.replace(" HD", "") + ": " + "mag-" + id + "-" + encode(name).replace(" HD", "").lower().replace(" ", "-"))
    channels.append("[B][COLOR lightskyblue]\n\nO2TV Sport kanály:[/COLOR][/B]\n\n    O2 Sport: o2tv-sport\n    O2 Fotbal: o2tv-fotbal\n    O2 Tenis: o2tv-tenis\n    O2 Sport1: o2tv-sport1\n    O2 Sport2: o2tv-sport2\n    O2 Sport3: o2tv-sport3\n    O2 Sport4: o2tv-sport4\n    O2 Sport5: o2tv-sport5\n    O2 Sport6: o2tv-sport6\n    O2 Sport7: o2tv-sport7\n    O2 Sport8: o2tv-sport8\n\n[B][COLOR lightskyblue]\nmůjTVprogram.cz kanály:[/COLOR][/B]\n\n    Skylink 7: 723-skylink-7\n\n    Stingray Classica: 233-stingray-classica\n\n    Stingray iConcerts: 234-stingray-iconcerts\n\n    Stingray CMusic: 110-stingray-cmusic\n\n    ORF1: 40-orf1\n\n    ORF2: 41-orf2\n\n    RTL: 49-rtl\n\n    RTL2: 50-rtl2\n\n    Polsat: 39-polsat\n\n    TVP1: 37-tvp1\n\n    TVP2: 38-tvp2\n\n    Pro7: 174-pro7\n\n    SAT1: 52-sat1\n\n    Kabel1: 54-kabel1\n\n    VOX: 53-vox\n\n    ZDF: 393-zdf\n\n    ZDF Neo: 216-zdf-neo\n\n    3SAT: 46-3sat\n\n    SAT.1 GOLD: 408-sat1-gold\n\n    Vixen: 892-vixen\n\n    Canal+ Sport: 1040-canal+sport\n\n[B][COLOR lightskyblue]\nEurosport kanály:[/COLOR][/B]\n\n    Eurosport 3: Eurosport3\n\n    Eurosport 4: Eurosport4\n\n    Eurosport 5: Eurosport5\n\n[B][COLOR lightskyblue]\nSledovaniTV.cz kanály:[/COLOR][/B]\n\n    ČT1: stv-ct1\n\n    ČT2: stv-ct2\n\n    ČT3: stv-ct3\n\n    ČT24: stv-ct24\n\n    Déčko: stv-ctdecko\n\n    ČT art: stv-ctart\n\n    ČT Sport: stv-ct4sport\n\n    Nova: stv-nova\n\n    Nova Cinema: stv-novacinema\n\n    Nova Action: stv-fanda\n\n    Nova Fun: stv-smichov\n\n    Nova Lady: stv-nova_lady\n\n    Nova Gold: stv-telka\n\n    Prima: stv-primafamily\n\n    Prima COOL: stv-primacool\n\n    Prima Max: stv-prima_max\n\n    Prima Love: stv-primalove\n\n    Prima Krimi: stv-prima_krimi\n\n    Prima Show: stv-prima_show\n\n    Prima Star: stv-prima_star\n\n    Prima Zoom: stv-primazoom\n\n    CNN Prima News: stv-prima_news\n\n    Paramount Network: stv-primacomedy\n\n    TV Barrandov: stv-barrandov\n\n    Barrandov Krimi: stv-barrandovplus\n\n    Kino Barrandov: stv-kinobarrandov\n\n    Televize Seznam: stv-Seznam\n\n    Relax: stv-pohoda\n\n    TV Noe: stv-tvnoe\n\n    Jednotka: stv-stv1\n\n    Dvojka: stv-stv2\n\n    Trojka: stv-stv3\n\n    Markíza International: stv-markizaint\n\n    JOJ Family: stv-jojfamily\n\n    TA3: stv-ta3\n\n    TV Lux: stv-tv_lux\n\n    Life TV: stv-TVlife\n\n    HBO: stv-HBO\n\n    HBO 2: stv-HBO2\n\n    HBO 3: stv-hbo_comedy\n\n    Cinemax 1: stv-cinemax1\n\n    Cinemax 2: stv-cinemax2\n\n    JOJ Cinema: stv-jojcinema\n\n    AMC: stv-amc\n\n    Film+: stv-film_plus\n\n    FilmBox: stv-filmbox\n\n    Filmbox Extra HD: stv-FilmboxHD\n\n    FilmBox Premium: stv-FilmboxExtra\n\n    Filmbox Stars: stv-filmboxplus\n\n    FilmBox Family: stv-FilmboxFamily\n\n    Filmbox Arthouse: stv-FilmboxArthouse\n\n    Film Europe: stv-Film_Europe\n\n    Film Europe + HD: stv-Kino_CS\n\n    AXN: stv-axn\n\n    AXN White: stv-axnwhite\n\n    AXN Black: stv-axnblack\n\n    CS Film: stv-cs_film\n\n    CS Horror: stv-horor_film\n\n    HaHa TV: stv-haha_tv\n\n    Spektrum: stv-spektrum\n\n    National Geographic HD: stv-NGC_HD\n\n    National Geographic Wild: stv-nat_geo_wild\n\n    Animal Planet: stv-animal_planet\n\n    Discovery: stv-Discovery\n\n    Discovery Science: stv-Science\n\n    Discovery Turbo Xtra: stv-world\n\n    Investigation Discovery: stv-ID\n\n    Discovery : TLC: stv-TLC\n\n    Crime and Investigation: stv-sat_crime_invest\n\n    History Channel: stv-history\n\n    Viasat Explore: stv-viasat_explore\n\n    Viasat History: stv-viasat_history\n\n    Viasat Nature: stv-viasat_nature\n\n    Love Nature: stv-love_nature\n\n    Travelxp: stv-travelxp\n\n    Travel Channel HD: stv-travelhd\n\n    Fishing&Hunting: stv-fishinghunting\n\n    CS Mystery: stv-kinosvet\n\n    CS History: stv-war\n\n    TV Paprika: stv-tv_paprika\n\n    TV Mňam: stv-mnamtv\n\n    Hobby TV: stv-hobby\n\n    TV Natura: stv-natura\n\n    DocuBox: stv-DocuBoxHD\n\n    FashionBox: stv-FashionboxHD\n\n    NASA TV: stv-nasatv\n\n    NASA TV UHD: stv-nasatv_uhd\n\n    Eurosport: stv-Eurosport\n\n    Eurosport2: stv-Eurosport2\n\n    Sport1: stv-Sport1\n\n    Sport2: stv-Sport2\n\n    Nova Sport 1: stv-nova_sport\n\n    Nova Sport 2: stv-nova_sport2\n\n    Arena sport 1: stv-slovak_sport\n\n    Arena sport 2: stv-slovak_sport2\n\n    Sport 5: stv-sport5\n\n    Auto Motor Sport: stv-auto_motor_sport\n\n    Golf Channel: stv-golf\n\n    FightBox: stv-FightboxHD\n\n    Chuck TV: stv-chucktv\n\n    Fast & Fun Box: stv-Fastnfunbox\n\n    Lala TV: stv-lala_tv\n\n    Rik: stv-rik2\n\n    Jim Jam: stv-Jim_Jam\n\n    Nickelodeon: stv-Nickelodeon\n\n    Nicktoons: stv-nicktoons\n\n    Nick JR: stv-nickjr\n\n    Nick JR EN: stv-nick_jr_en\n\n    Minimax: stv-Minimax\n\n    Disney Channel: stv-Disney_Channel\n\n    Disney Junior: stv-disney_junior\n\n    Cartoon Network CZ: stv-cartoon_cz\n\n    Cartoon Network HD: stv-cartoon_network_hd\n\n    Cartoon Network EN: stv-cartoon\n\n    Boomerang: stv-boomerang\n\n    Baby TV: stv-baby_tv\n\n    Óčko HD: stv-ockoHD\n\n    Óčko STAR HD: stv-ocko_starHD\n\n    Óčko EXPRES HD: stv-ocko_expresHD\n\n    Óčko BLACK HD: stv-ocko_blackHD\n\n    Retro: stv-retro\n\n    Rebel: stv-rebel\n\n    MTV: stv-mtv\n\n    MTV Hits: stv-mtv_hits\n\n    360TuneBox: stv-360TuneBox\n\n    Deluxe Music: stv-deluxe\n\n    Lounge TV: stv-lounge\n\n    iConcerts: stv-i_concerts\n\n    Mezzo: stv-mezzo\n\n    Mezzo Live HD: stv-mezzo_live\n\n    Šláger Originál: stv-slagr\n\n    Šláger Muzika: stv-slagr2\n\n    Šláger Premium HD: stv-slagr_premium\n\n    ČT1 SM: stv-ct1sm\n\n    ČT1 JM: stv-ct1jm\n\n    regionalnitelevize.cz: stv-regiotv\n\n    Regionální televize jižní Čechy: stv-rt_jc\n\n    RT Ústecko: stv-rt_ustecko\n\n    TV Praha: stv-praha\n\n    TV Brno 1: stv-brno1\n\n    Info TV Brno a jižní morava: stv-info_tv_brno\n\n    Polar: stv-Polar\n\n    TVS: stv-slovacko\n\n    V1 TV: stv-v1tv\n\n    Plzeň TV: stv-plzen_tv\n\n    ZAK TV: stv-zaktv\n\n    Kladno.1 TV: stv-kladno\n\n    Filmpro: stv-filmpro\n\n    RTM+ (Liberecko): stv-rtm_plus_liberec\n\n    ORF eins: stv-orf1\n\n    ORF zwei: stv-orf2\n\n    CNN: stv-cnn\n\n    Sky News: stv-sky_news\n\n    BBC World: stv-bbc\n\n    France 24: stv-france24\n\n    France 24 (FR): stv-france24_fr\n\n    TV5MONDE: stv-tv5\n\n    Russia Today: stv-russiatoday\n\n    RT Documentary: stv-rt_doc\n\n    UA TV: stv-uatv\n\n    TV Mňau: stv-mnau\n\n    Zoo Brno - Africká vesnice: stv-zoo_brno_a_vesnice\n\n    Zoo Brno - Medvěd kamčatský: stv-zoo_brno_m_kamcatsky\n\n    Zoo Brno - Medvěd lední: stv-zoo_brno_m_ledni\n\n    Zoo Brno - Komentovaná krmení: stv-komentovana_krmeni\n\n    Zoo Brno - Život v zoo: stv-zvirata_v_zoo\n\n    Galerie zvířat: stv-loop_naturetv-galerie-zvirat\n\n    Ošetřování mláďat: stv-loop_naturetv-osetrovani-mladat\n\n    Kočičí kavárna: stv-uscenes_cat_cafe\n\n    Čapí hnízdo: stv-stork_nest\n\n    Pláž: stv-uscenes_hammock_beach\n\n    Korálová zahrada: stv-uscenes_coral_garden\n\n    Mumlavské vodopády: stv-loop_naturetv_mumlava_waterfalls\n\n    Noční Praha: stv-night_prague\n\n    Krb: stv-fireplace\n\n    Erox: stv-eroxHD\n\n    Eroxxx: stv-eroxxxHD\n\n    Leo TV Gold: stv-leo_gold\n\n    Extasy 4K: stv-extasy_4k\n\n    ČRo Radiožurnál: stv-radio_cro1\n\n    ČRo Dvojka: stv-radio_cro2\n\n    ČRo Radio Wave: stv-radio_wave\n\n    Evropa 2: stv-radio_evropa2\n\n    Impuls: stv-radio_impuls\n\n    Frekvence 1: stv-radio_frekvence1\n\n    Kiss: stv-radio_kiss\n\n    Fajn Radio: stv-radio_fajn\n\n    Rádio Orlicko: stv-radio_orlicko\n\n    Krokodýl: stv-radio_krokodyl\n\n    Černá Hora: stv-radio_cernahora\n\n    Signál rádio: stv-radio_signal\n\n    Rádio Spin: stv-radio_spin\n\n    Rádio Country: stv-radio_country\n\n    Rádio BEAT: stv-radio_beat\n\n    Rádio 1: stv-radio_1\n\n    Radio Dychovka: stv-radio_dychovka\n\n    Radio Dechovka: stv-radio_dechovka\n\n    Rádio Slovensko: stv-radio_slovensko\n\n    Rádio FM: stv-radio_fm\n\n    Rádio Regina Západ: stv-radio_regina_sk\n\n    Rádio Expres: stv-radio_expres\n\n    Rádio Fun: stv-radio_fun\n\n    Rádio Jemné: stv-radio_jemne\n\n    Rádio Vlna: stv-radio_vlna\n\n    Rádio Best FM: stv-radio_bestfm\n\n    Rádio Košice: stv-radio_kosice\n\n    Radio WOW: stv-radio_wow_sk\n\n    Rádio Lumen: stv-radio_lumen\n\n    Rádia Regina Východ: stv-radio_regina_vy\n\n    Rádio Devín: stv-radio_devin\n\n    Rádio Patria: stv-radio_patria\n\n    Fit family rádio: stv-radio_fit_family\n\n    NON-STOP rádio: stv-radio_nonstop\n\n    ČRo Vltava: stv-radio_cro3\n\n    ČRo Plus: stv-radio_cro6\n\n    ČRo Jazz: stv-radio_jazz\n\n    ČRo Junior: stv-radio_junior\n\n    ČRo D-Dur: stv-radio_ddur\n\n    ČRo Brno: stv-radio_brno\n\n    ČRo Radio Praha: stv-radio_praha\n\n    ČRo České Budějovice: stv-radio_ceskebudejovice\n\n    ČRo Hradec Králové: stv-radio_hk\n\n    ČRo Olomouc: stv-radio_olomouc\n\n    ČRo Ostrava: stv-radio_ostrava\n\n    ČRo Pardubice: stv-radio_pardubice\n\n    ČRo Plzeň: stv-radio_plzen\n\n    ČRo Region - Středočeský kraj: stv-radio_region\n\n    ČRo Region - Vysočina: stv-radio_vysocina\n\n    ČRo Sever: stv-radio_sever\n\n    ČRo Sever - Liberec: stv-radio_liberec\n\n    ČRo Regina: stv-radio_regina\n\n    RadioR: stv-radior\n\n    Rádio Otava: stv-radio_blatna\n\n    Proglas: stv-radio_proglas\n\n    i-Vysočina: stv-ivysocina_stream_zs\n\n    TV Beskyd: stv-tvbeskyd\n\n    cms:tv: stv-cms_tv\n\n    Panorama TV: stv-panorama_tv\n\n    Jihočeská televize: stv-jihoceska_televize\n\n    Tik Bohumín: stv-tik_bohumin\n\n    Dorcel TV: stv-DorceltvHD\n\n    Dorcel XXX: stv-DorcelHD\n\n    Playboy TV: stv-playboy\n\n    ČRo Pohoda: stv-radio_cro_pohoda\n\n    Rádio Jih: stv-radio_jih\n\n    Rádio Jihlava: stv-radio_jihlava\n\n    Free Rádio: stv-radio_free\n\n    JuKej Radio: stv-radio_jukej\n\n    PiGy Disko Trysko: stv-radio_pigy_disko\n\n    PiGy Pohádkové písničky: stv-radio_pigy_pisnicky\n\n    PiGy Pohádky: stv-radio_pigy_pohadky\n\n    Radio Z: stv-radio_z\n\n    Radio Čas: stv-radio_cas\n\n    Dance Rádio: stv-radio_dance\n\n    Hitrádio Desítka: stv-radio_hit_desitka\n\n    Hitradio Osmdesatka: stv-radio_hitradio_80\n\n    Hitradio Devadesátka: stv-radio_hitradio_90\n\n    Hitradio Orion: stv-radio_hitradio_orion\n\n    Rádio Blaník: stv-radio_blanik\n\n    Rock Rádio: stv-radio_rock_radio\n\n    ČRo Radiožurnál Sport: stv-radio_cro_sport\n\n    ČRo Zlín: stv-radio_cro_zlin\n\n    ČRo Karlovy Vary: stv-radio_cro_kv\n\n    Radio Color: stv-radio_color\n\n    Radio Hey: stv-radio_hey\n\n    SeeJay: stv-seejay\n\n    Pervij kanal: stv-russia_channel1\n\n    Dom Kino: stv-dom_kino\n\n    Dom Kino Premium: stv-dom_kino_premium\n\n    Vremya: stv-vremya\n\n    Poekhali!: stv-poehali\n\n    Muzika Pervogo: stv-muzika_pervogo\n\n    Bobyor: stv-bobyor\n\n    O!: stv-telekanal_o\n\n    Telecafe: stv-telecafe\n\n    Karusel: stv-karousel\n\n    X-mo: stv-x-mo\n\n    Brazzers TV Europe: stv-brazzers\n\n    Leo TV: stv-leo\n\n    Extasy: stv-extasy\n\n    Private HD: stv-privatetv\n\n    Reality Kings: stv-realitykings\n\n    True Amateurs: stv-true_amateurs\n\n    Babes TV: stv-babes_tv\n\n    Redlight: stv-redlight\n\n[B][COLOR lightskyblue]\nSledovanieTV.sk kanály:[/COLOR][/B]\n\n    Markíza: stvsk-markiza\n\n    JOJ: stvsk-joj\n\n    JOJ Plus: stvsk-jojplus\n\n    Doma: stvsk-doma\n\n    JOJ Šport: stvsk-joj_sport\n\n    Dajto: stvsk-dajto\n\n    Rik: stvsk-rik2\n\n    Jojko: stvsk-rik\n\n    WAU: stvsk-wau\n\n    Nova International: stvsk-novaint\n\n    Prima PLUS: stvsk-primaplus\n\n    RTVS Šport: stvsk-stv4\n\n    Televizia Osem: stvsk-tv_osem\n\n    M1: stvsk-m1\n\n    M2: stvsk-m2\n\n    M4 Sport: stvsk-m4\n\n    Arcadia World: stvsk-arcadia\n\n    TV Karpaty: stvsk-karpaty\n\n    TV Liptov: stvsk-tv_liptov\n\n    Central: stvsk-tv_central\n\n    TV Lux: stvsk-tv_lux\n\n    TV Ružomberok: stvsk-ruzomberok\n\n[B][COLOR lightskyblue]\nTV Spiel kanály:[/COLOR][/B]\n\n    Eurosport 1 (DE): EURO\n\n    Eurosport 2 (DE): EURO2\n\n    Sky Sport 1 (DE): HDSPO\n\n    Sky Sport 2 (DE): SHD2\n\n    Sky Sport Austria1: SPO-A\n\n    ORF Sport+: ORFSP\n\n[B][COLOR lightskyblue]\nOTT Play kanály:[/COLOR][/B]\n\n    Penthouse Gold: 7:2777\n\n    Penthouse Quickies: 7:2779\n\n    Vivid Red: 7:2528\n\n    Super Tennis: ITbas:SuperTennis.it")
    text = "\n\n".join(channels)
    xbmc.executebuiltin('Dialog.Close(busydialognocancel)')
    xbmcgui.Dialog().textviewer("Seznam tvg-id kanálů", text)


if __name__ == "__main__":
    main()